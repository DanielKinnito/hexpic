<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HexPic React Demo</title>
    <link rel="stylesheet" href="style.css">

    <!-- Import Map for React and HexPic -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "hexpic": "./dist/index.esm.js"
      }
    }
    </script>
</head>

<body>
    <div class="container">
        <header>
            <div class="logo">HexPic React Demo</div>
            <nav>
                <a href="index.html">Vanilla Demo</a>
                <a href="#" class="active">React Demo</a>
            </nav>
        </header>

        <main class="hero">
            <div class="hero-content">
                <h1>React Component<br>Wrapper</h1>
                <p class="subtitle">Just wrap your image source with <code>&lt;HexPicImage /&gt;</code>!</p>
                <div id="root"></div>
            </div>
        </main>
    </div>

    <script type="module">
        import React, { useState } from 'react';
        import { createRoot } from 'react-dom/client';
        import { HexPicImage } from 'hexpic';

        console.log('React Demo Script Started');

        const App = () => {
            const [width, setWidth] = useState(100);
            const [contrast, setContrast] = useState(1.0);
            const [brightness, setBrightness] = useState(0);
            const [invert, setInvert] = useState(false);

            return React.createElement('div', null,
                React.createElement('div', { className: 'controls', style: { marginBottom: '2rem' } },
                    React.createElement('div', { className: 'settings' },
                        React.createElement('div', { className: 'setting-group' },
                            React.createElement('label', null, 'Width: ' + width),
                            React.createElement('input', {
                                type: 'range', min: 20, max: 200, value: width,
                                onChange: (e) => setWidth(parseInt(e.target.value))
                            })
                        ),
                        React.createElement('div', { className: 'setting-group' },
                            React.createElement('label', null, 'Contrast: ' + contrast.toFixed(1)),
                            React.createElement('input', {
                                type: 'range', min: 0, max: 2, step: 0.1, value: contrast,
                                onChange: (e) => setContrast(parseFloat(e.target.value))
                            })
                        ),
                        React.createElement('div', { className: 'setting-group' },
                            React.createElement('label', null, 'Brightness: ' + brightness.toFixed(1)),
                            React.createElement('input', {
                                type: 'range', min: -1, max: 1, step: 0.1, value: brightness,
                                onChange: (e) => setBrightness(parseFloat(e.target.value))
                            })
                        ),
                        React.createElement('div', { className: 'setting-group' },
                            React.createElement('label', null, 'Invert'),
                            React.createElement('input', {
                                type: 'checkbox', checked: invert,
                                onChange: (e) => setInvert(e.target.checked)
                            })
                        )
                    )
                ),
                React.createElement('div', { className: 'profile-container', style: { height: 'auto', minHeight: '400px' } },
                    React.createElement(HexPicImage, {
                        src: 'profile.png',
                        alt: 'Profile Picture',
                        style: {
                            width: '100%',
                            color: '#bb86fc',
                            fontSize: '6px', // Adjust based on container width/char width
                            lineHeight: '0.6em'
                        },
                        options: {
                            width,
                            contrast,
                            brightness,
                            invert,
                            preserveAspectRatio: true,
                            fontAspectRatio: 0.55 // Default
                        }
                    })
                )
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>

</html>